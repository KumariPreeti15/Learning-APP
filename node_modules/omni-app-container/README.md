# Omni App Container

## Getting Started

As with most javascript projects, you'll need to install npm depdendencies:

```bash
    npm ci
```

To run the local demo which contains documentation:

```bash
    npm start
```

### Installation

Once a release is made, you can install from the git repository. Update below example with the latest version.

```bash
npm install bitbucket:annalect/omni_app_container#semver:^3.0.1
```

### Usage

```html
<body>
    <omni-style></omni-style>
    <omni-app-container
        component="my-app"
        name="Demo"
        resourceKey="yourResourceKey"
    ></omni-app-container>
</body>
```

Note: contact annalect support to request a resource key for new apps. This is used to track usage. You will need support to configure your application deeplink as `https://exampleapp.annalect.com/{{clientid}}/exampleapp` to ensure your application deeplink is correctly loaded into an iframe on the Omni platform.

The demo (`npm start`) serves as both a source of documentation as well as an example app, see `demo/index.html`

## Main Components

This repository contains the following development-helpers:

-   The `<omni-app-container>` component.
    -   This functions as faux Portal wrapper that is useful for local development as well as when deployed standalone. It contains an approximation of the header, a sidebar, as well as user authentication (which relies on redirecting to omni for login)
    -   Currently this project works when run locally, when run standalone deployed, and also when iframed in portal. The future plan is to also implement integration in portal to run this natively (as a micro-fontend) within portal without the use of iframes.
-   `OmniAppContainerMixin` for components to easily access context properties, route parameters, as well as trigger navigation.
-   The `omni-ui-transform` module, which contains build plugins for `es-dev-server` (or `@web/dev-server`) as well as `rollup` for the shared-dependencies object on the Portal window.

## TODOs

-   Implement missing native Portal integration (requires changes to portal as well as more clearly defining how we can bundle micro frontend js bundles with versioning).
-   Add unit tests
-   Rename "resouceKey" to "typeKey" to avoid confusion
